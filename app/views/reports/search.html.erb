
<h1>Search</h1>
<%= form_tag search_reports_path, method: :get do %>
<%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search" %>
  <% if params[:search] %>
  <p>Total time before HTML is generated: <%= Time.now - @start_time %> s</p>
  <p>Memory used before HTML is generated: <%= @memory_used %> MB</p>
  <p>Number of hits: <%= @hits.length %></p>
  <table>
    <thead>
      <tr>
        <th>Subject Type</th>
        <th>Matching Gene Name</th>
        <th>Matching DNA</th>
        <th>Percent Similarity</th>
      </tr>
    </thead>
    <tbody>
      <% @hits.each do |h| %>
        <tr>
          <td><%= h.subject_type %></td>
          <td><%= h.match_gene_name %></td>
          <td><%= h.match_gene_dna.first(100) %></td>
          <td><%= h.percent_similarity %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <% else %>
  Please enter a search term to see results.
  <% end %>
<% end %>
<p>Total time before HTML is generated: <%= Time.now - @start_time %> s</p>
<p>Memory used after HTML is generated: <%= memory_in_mb %> MB</p>
